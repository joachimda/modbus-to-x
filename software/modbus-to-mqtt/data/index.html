<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Modbus To X</title>
    <link rel="stylesheet" href="/style.css">
    <link rel="stylesheet" href="style.css">
    <script type="importmap">
        {
          "imports": {
            "app": "/js/app.js",
            "index": "/js/index.js"
          }
        }
    </script>

</head>
<body data-page="index">
<div class="page">
    <header style="display:flex;justify-content:space-between;align-items:center;gap:1rem;flex-wrap:wrap;">
        <div>
            <h1>Modbus-to-X</h1>
            <div class="muted" id="device-subtitle">Loading device info…</div>
        </div>
        <nav class="actions">
            <button class="circleButton networkButton" onclick="window.location.href='/pages/configure_network.html'">
                <svg class="networkSvgIcon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                    <path d="M3 12H21M12 8V12M6.5 12V16M17.5 12V16M10.1 8H13.9C14.4601 8 14.7401 8 14.954 7.89101C15.1422 7.79513 15.2951 7.64215 15.391 7.45399C15.5 7.24008 15.5 6.96005 15.5 6.4V4.6C15.5 4.03995 15.5 3.75992 15.391 3.54601C15.2951 3.35785 15.1422 3.20487 14.954 3.10899C14.7401 3 14.4601 3 13.9 3H10.1C9.53995 3 9.25992 3 9.04601 3.10899C8.85785 3.20487 8.70487 3.35785 8.60899 3.54601C8.5 3.75992 8.5 4.03995 8.5 4.6V6.4C8.5 6.96005 8.5 7.24008 8.60899 7.45399C8.70487 7.64215 8.85785 7.79513 9.04601 7.89101C9.25992 8 9.53995 8 10.1 8ZM15.6 21H19.4C19.9601 21 20.2401 21 20.454 20.891C20.6422 20.7951 20.7951 20.6422 20.891 20.454C21 20.2401 21 19.9601 21 19.4V17.6C21 17.0399 21 16.7599 20.891 16.546C20.7951 16.3578 20.6422 16.2049 20.454 16.109C20.2401 16 19.9601 16 19.4 16H15.6C15.0399 16 14.7599 16 14.546 16.109C14.3578 16.2049 14.2049 16.3578 14.109 16.546C14 16.7599 14 17.0399 14 17.6V19.4C14 19.9601 14 20.2401 14.109 20.454C14.2049 20.6422 14.3578 20.7951 14.546 20.891C14.7599 21 15.0399 21 15.6 21ZM4.6 21H8.4C8.96005 21 9.24008 21 9.45399 20.891C9.64215 20.7951 9.79513 20.6422 9.89101 20.454C10 20.2401 10 19.9601 10 19.4V17.6C10 17.0399 10 16.7599 9.89101 16.546C9.79513 16.3578 9.64215 16.2049 9.45399 16.109C9.24008 16 8.96005 16 8.4 16H4.6C4.03995 16 3.75992 16 3.54601 16.109C3.35785 16.2049 3.20487 16.3578 3.10899 16.546C3 16.7599 3 17.0399 3 17.6V19.4C3 19.9601 3 20.2401 3.10899 20.454C3.20487 20.6422 3.35785 20.7951 3.54601 20.891C3.75992 21 4.03995 21 4.6 21Z" stroke="currentColor" stroke-width="2" fill="none"/>
                </svg>
                <span class="tooltip">Configure Network</span>
            </button>
            <button class="circleButton configureButton" onclick="window.location.href='/pages/configure_modbus.html'">
                <svg class="configureSvgIcon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path d="M6.99998 11.5C7.4142 11.5 7.74998 11.1642 7.74998 10.75C7.74998 10.3358 7.4142 10 6.99998 10C6.58577 10 6.24998 10.3358 6.24998 10.75C6.24998 11.1642 6.58577 11.5 6.99998 11.5Z" fill="currentColor"/>
                    <path d="M10.25 10.75C10.25 11.1642 9.9142 11.5 9.49998 11.5C9.08577 11.5 8.74998 11.1642 8.74998 10.75C8.74998 10.3358 9.08577 10 9.49998 10C9.9142 10 10.25 10.3358 10.25 10.75Z" fill="currentColor"/>
                    <path d="M8.24998 14C8.6642 14 8.99998 13.6642 8.99998 13.25C8.99998 12.8358 8.6642 12.5 8.24998 12.5C7.83577 12.5 7.49998 12.8358 7.49998 13.25C7.49998 13.6642 7.83577 14 8.24998 14Z" fill="currentColor"/>
                    <path d="M11.5 13.25C11.5 13.6642 11.1642 14 10.75 14C10.3358 14 9.99998 13.6642 9.99998 13.25C9.99998 12.8358 10.3358 12.5 10.75 12.5C11.1642 12.5 11.5 12.8358 11.5 13.25Z" fill="currentColor"/>
                    <path d="M13.25 14C13.6642 14 14 13.6642 14 13.25C14 12.8358 13.6642 12.5 13.25 12.5C12.8358 12.5 12.5 12.8358 12.5 13.25C12.5 13.6642 12.8358 14 13.25 14Z" fill="currentColor"/>
                    <path d="M16.5 13.25C16.5 13.6642 16.1642 14 15.75 14C15.3358 14 15 13.6642 15 13.25C15 12.8358 15.3358 12.5 15.75 12.5C16.1642 12.5 16.5 12.8358 16.5 13.25Z" fill="currentColor"/>
                    <path d="M12 11.5C12.4142 11.5 12.75 11.1642 12.75 10.75C12.75 10.3358 12.4142 10 12 10C11.5858 10 11.25 10.3358 11.25 10.75C11.25 11.1642 11.5858 11.5 12 11.5Z" fill="currentColor"/>
                    <path d="M15.25 10.75C15.25 11.1642 14.9142 11.5 14.5 11.5C14.0858 11.5 13.75 11.1642 13.75 10.75C13.75 10.3358 14.0858 10 14.5 10C14.9142 10 15.25 10.3358 15.25 10.75Z" fill="currentColor"/>
                    <path d="M17 11.5C17.4142 11.5 17.75 11.1642 17.75 10.75C17.75 10.3358 17.4142 10 17 10C16.5858 10 16.25 10.3358 16.25 10.75C16.25 11.1642 16.5858 11.5 17 11.5Z" fill="currentColor"/>
                    <path d="M4.90701 6.99933C3.13073 6.99933 1.82042 8.65816 2.23177 10.3862L3.30329 14.8875C3.5982 16.1263 4.70507 17.0007 5.97854 17.0007H18.0172C19.2901 17.0007 20.3966 16.1271 20.6921 14.889L21.7664 10.3877C22.1789 8.65932 20.8685 6.99933 19.0915 6.99933H4.90701ZM3.69099 10.0388C3.50402 9.25334 4.09961 8.49933 4.90701 8.49933H19.0915C19.8992 8.49933 20.4949 9.25387 20.3074 10.0395L19.2331 14.5408C19.0988 15.1036 18.5958 15.5007 18.0172 15.5007H5.97854C5.39969 15.5007 4.89657 15.1032 4.76252 14.5401L3.69099 10.0388Z" fill="currentColor"/>
                </svg>
                <span class="tooltip">Configure Modbus</span>
            </button>
            <button class="circleButton mqttButton" onclick="window.location.href='/pages/configure_mqtt.html'">
                    <svg class="mqttSvgIcon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                        <path d="M67.949714 370.102857A40.813714 40.813714 0 0 0 62.171429 445.44l305.590857 152.868571-2.779429 193.389715a41.252571 41.252571 0 0 0 58.733714 37.522285l195.072-91.428571 313.563429 148.333714a41.398857 41.398857 0 0 0 38.838857-1.755428 40.813714 40.813714 0 0 0 19.968-33.133715l22.674286-747.666285a40.667429 40.667429 0 0 0-16.091429-34.523429 41.398857 41.398857 0 0 0-37.814857-6.290286m-32.109714 756.809143L638.537143 679.570286a40.009143 40.009143 0 0 0-34.084572 0l-171.446857 83.821714 3.218286-177.005714a39.497143 39.497143 0 0 0-21.869714-35.693715L134.290286 417.28l815.542857-281.234286-21.942857 683.52zM595.163429 577.316571l269.531428-269.385142c10.752-10.605714 10.752-32.329143 0-43.008a28.306286 28.306286 0 0 0-39.350857 0L551.643429 535.771429a29.257143 29.257143 0 0 0 0 40.009142c14.848 15.945143 38.180571 6.875429 43.52 1.536z"  fill="currentColor"/>
                    </svg>
                    <span class="tooltip">Configure MQTT</span>
                </button>
            <button class="circleButton rebootButton" id="btn-reboot">
                <svg class="rebootSvgIcon" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                    <path d="m 8 0 c -0.550781 0 -1 0.449219 -1 1 v 5 c 0 0.550781 0.449219 1 1 1 s 1 -0.449219 1 -1 v -5 c 0 -0.550781 -0.449219 -1 -1 -1 z m -7 1 l 2.050781 2.050781 c -2.117187 2.117188 -2.652343 5.355469 -1.332031 8.039063 c 1.324219 2.683594 4.214844 4.238281 7.179688 3.851562 c 2.96875 -0.386718 5.367187 -2.625 5.960937 -5.554687 c 0.59375 -2.933594 -0.75 -5.929688 -3.335937 -7.433594 c -0.476563 -0.28125 -1.089844 -0.117187 -1.367188 0.359375 s -0.117188 1.089844 0.359375 1.367188 c 1.851563 1.078124 2.808594 3.207031 2.382813 5.3125 c -0.421876 2.101562 -2.128907 3.691406 -4.253907 3.96875 c -2.128906 0.273437 -4.183593 -0.828126 -5.128906 -2.753907 s -0.566406 -4.226562 0.949219 -5.742187 l 1.535156 1.535156 v -4.003906 c 0 -0.519532 -0.449219 -0.996094 -1 -0.996094 z m 0 0" fill="currentColor"/>
                </svg>
                <span class="tooltip">Reboot</span>
            </button>

        </nav>
    </header>

    <section class="grid" style="margin-top:1rem;">
        <article class="card" id="card-system">
            <h3>System</h3>
            <div class="kvs" id="system-kvs"></div>
        </article>

        <article class="card" id="card-wifi">
            <h3>Wi-Fi</h3>
            <div class="kvs" id="wifi-kvs"></div>
        </article>

        <article class="card" id="card-mqtt">
            <h3>MQTT</h3>
            <div class="kvs" id="mqtt-kvs"></div>
        </article>

        <article class="card" id="card-modbus">
            <h3>Modbus</h3>
            <div class="kvs" id="modbus-kvs"></div>
        </article>

        <article class="card" id="card-storage">
            <h3>Storage</h3>
            <div class="kvs" id="storage-kvs"></div>
        </article>
    </section>

    <section class="card" style="margin-top:1rem;">
        <details id="logs-panel">
            <summary style="display:flex;align-items:center;gap:.5rem;">Device Logs <span class="muted" style="font-weight:400">(live stream)</span>
                <span class="spacer"></span>
                <button class="btn ghost" id="btn-refresh-logs" style="margin:2px 0 0 0;">Resync</button>
            </summary>
            <div class="terminal" id="logs-console">Open to load logs…</div>
        </details>
    </section>

    <p class="footer">Firmware <span id="fw-version" class="mono">—</span> • Build <span id="build-date" class="mono">—</span></p>

    <div class="footer-logo">
        <img src="/mbx_graphics.svg" alt="MBX Graphics Logo">
    </div>

    <div class="footer-links">
        <a class="githubBtn" href="https://github.com/joachimda/modbus-to-x" target="_blank" rel="noopener" aria-label="Open GitHub repository">
            <span class="svgContainer">
                <svg fill="white" viewBox="0 0 496 512" height="1.6em" aria-hidden="true"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg>
            </span>
            <span class="BG"></span>
        </a>
    </div>
</div>

<script type="module">
    import 'app';
    import 'index';
</script>

</body>
</html>
